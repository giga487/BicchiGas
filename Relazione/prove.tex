\documentclass[a4paper]{article}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[english,italian]{babel}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{array}
\usepackage{booktabs}
\usepackage{mathtools}
\usepackage{diffcoeff}
\usepackage{caption}
\usepackage{float}
\usepackage{titlesec}
\usepackage{gensymb}
\usepackage{siunitx}
\usepackage{subfig}
\usepackage{systeme}

\begin{document}
Manipolatore di Stanford
\begin{equation}
\tau = K_p e + K_d \dot{e} + G(q)
\end{equation}
\begin{equation}
K_p = 
\begin{bmatrix}
1000 & 0 & 0	& 0 & 0 & 0 \\
0 & 1000 & 0 & 0 & 0 & 0 \\
0 & 0 & 100 & 0 & 0 & 0 \\
0 & 0 & 0 & 100 & 0 & 0 \\
0 & 0 & 0 & 0 & 100 & 0 \\
0 & 0 & 0 & 0 & 0 & 10
\end{bmatrix}
\end{equation}
\begin{equation}
K_d = 
\begin{bmatrix}
10 & 0 & 0	& 0 & 0 & 0 \\
0 & 100 & 0 & 0 & 0 & 0 \\
0 & 0 & 10 & 0 & 0 & 0 \\
0 & 0 & 0 & 10 & 0 & 0 \\
0 & 0 & 0 & 0 & 10 & 0 \\
0 & 0 & 0 & 0 & 0 & 10
\end{bmatrix}
\end{equation}

\begin{equation}
\tau = B(q)[\ddot{q_d} + K_p e + K_d \dot{e}] + C(q,\dot{q})\dot{q} + G(q)
\end{equation}
\begin{equation}
K_p = 
\begin{bmatrix}
1 & 0 & 0	& 0 & 0 & 0 \\
0 & 1 & 0 & 0 & 0 & 0 \\
0 & 0 & 1 & 0 & 0 & 0 \\
0 & 0 & 0 & 1 & 0 & 0 \\
0 & 0 & 0 & 0 & 1 & 0 \\
0 & 0 & 0 & 0 & 0 & 1
\end{bmatrix}
\end{equation}
\begin{equation}
K_d = 
\begin{bmatrix}
1 & 0 & 0	& 0 & 0 & 0 \\
0 & 1 & 0 & 0 & 0 & 0 \\
0 & 0 & 1 & 0 & 0 & 0 \\
0 & 0 & 0 & 1 & 0 & 0 \\
0 & 0 & 0 & 0 & 1 & 0 \\
0 & 0 & 0 & 0 & 0 & 1
\end{bmatrix}
\end{equation}

\begin{equation}
\tau = Y \hat{\pi} + K_d\dot{e} + K_p e
\end{equation}
\begin{equation}
u_{\pi} = R^{-1} Y^T M^{-T} B^T P x
\end{equation}
\begin{equation}
K_p = 
\begin{bmatrix}
1000 & 00 & 0	& 0 & 0 & 0 \\
0 & 10000 & 0 & 0 & 0 & 0 \\
0 & 0 & 10000 & 0 & 0 & 0 \\
0 & 0 & 0 & 10000 & 0 & 0 \\
0 & 0 & 0 & 0 & 10000 & 0 \\
0 & 0 & 0 & 0 & 0 & 10
\end{bmatrix}
\end{equation}
\begin{equation}
K_d = 
\begin{bmatrix}
100 & 00 & 0	& 0 & 0 & 0 \\
0 & 1000 & 0 & 0 & 0 & 0 \\
0 & 0 & 1000 & 0 & 0 & 0 \\
0 & 0 & 0 & 1000 & 0 & 0 \\
0 & 0 & 0 & 0 & 1000 & 0 \\
0 & 0 & 0 & 0 & 0 & 10
\end{bmatrix}
\end{equation}
\begin{equation}
R = I_{6}
\end{equation}
\begin{equation}
A = 
\begin{bmatrix}
0_{6} & I_{6} \\
-K_p & -K_d 
\end{bmatrix}
\end{equation}
\begin{equation}
B = 
\begin{bmatrix}
0_{6} \\
I_{6}
\end{bmatrix}
\end{equation}
\begin{equation}
Q = I_{12}
\end{equation}
\begin{equation}
A^T P + P A = -Q
\end{equation}

Gantry crane
\begin{equation}
\ddot{\theta}D  + [\ddot{x}lcos\theta + glsin\theta] B = -b_1 \dot{\theta}
\end{equation}
\begin{equation}
\ddot{x}C  + [\ddot{x}lcos\theta + glsin\theta] B = F - b_2 \dot{x}
\end{equation}
\begin{equation}
B = m_1 + \frac{1}{3}m_2
\end{equation}
\begin{equation}
C = m_1 + m_2 + M
\end{equation}
\begin{equation}
D = \frac{2}{5}m_1r^2
\end{equation}

\begin{equation}
\mathbf{q} =
\left[ \begin{array}{ccc}
\theta \\
\dot{\theta}\\
x \\
\dot{x}
\end{array} \right]
\end{equation}

\[
\systeme{
\dot{q_0} = q_1,
\dot{q_1} = \frac{-b_1 q_1}{D} - \frac{glsin(q_0)B}{D} + \frac{(b_2 q_3  + glsin(q_0)B) (lcos(q_0)B)}{(C + lcos(q_0)B)D} - \frac{F lcos(q_0)B}{(C + lcos(q_0)B)D},
\dot{q_2} = q_3,
\dot{q_3} =  \frac{(-b_2 q_3  - glsin(q_0)B)}{C + lcos(q_0)B} + \frac{F}{C + lcos(q_0)B}
}
\]

\begin{gather}
\dot{q} = f(q) + g(q)u \\
y = h(q)
\end{gather}

\begin{equation}
\mathbf{f(q)} =
\left[ \begin{array}{ccc}
q_1 \\
\frac{-b_1 q_1}{D} - \frac{glsin(q_0)B}{D} + \frac{(b_2 q_3  + glsin(q_0)B) (lcos(q_0)B)}{(C + lcos(q_0)B)D}  \\
q_3 \\
\frac{(-b_2 q_3  - glsin(q_0)B)}{C + lcos(q_0)B}
\end{array} \right]
\end{equation}
\begin{equation}
\mathbf{g(q)} =
\left[ \begin{array}{ccc}
0 \\
- \frac{F lcos(q_0)B}{(C + lcos(q_0)B)D} \\
0 \\
\frac{F}{C + lcos(q_0)B}
\end{array} \right]
\end{equation}
\begin{equation}
\mathbf{h(q)} =
q_0 = \theta
\end{equation}

\begin{equation}
\mathbf{h(q)} =
q_2 = x
\end{equation}

\begin{equation}
\mathbf{h(q)} =
q_2 + l sin(q_0)
\end{equation}

\begin{equation}
\mathbf{\Delta} =
\left[ \begin{array}{ccccc}
0 & * & * & * & *\\
* & * & * & * & *\\
0 & * & * & * & *\\
* & * & * & * & *
\end{array} \right]
\end{equation}

\begin{equation}
\mathbf{dO} =
\left[ \begin{array}{cccc}
* & 0 & 1 & 0\\
* & * & 0 & 1\\
* & 0 & 0 & 0\\
* & * & 0 & 0\\    
* & * & 0 & 0\\
* & 0 & 0 & 0
\end{array} \right]
\end{equation}

\begin{equation}
\mathbf{dO} =
\left[ \begin{array}{cccc}
0 & 0 & 1 & 0\\
0 & 0 & 0 & 1\\    
* & 0 & 0 & *\\
* & 0 & 0 & 0
\end{array} \right]
\end{equation}

\begin{equation}
\mathbf{dO} =
\left[ \begin{array}{cccc}
1 & 0 & 0 & 0\\
0 & 1 & 0 & 0\\    
* & * & 0 & *\\
* & 0 & 0 & 0
\end{array} \right]
\end{equation}

\begin{equation}
\mathbf{z} =
\left[ \begin{array}{ccc}
h \\
L_f h \\
q_0 \\
\frac{-1}{l cosq_0 B} q_1 + q_3
\end{array} \right]
\end{equation}
\begin{equation}
\mathbf{\dot{z}} =
\left[ \begin{array}{ccc}
L_f h\\
L_f^2 h + L_g L_f h u \\
\dot{q_0} \\
\frac{\partial z_3}{\partial q} (f + gu)
\end{array} \right]
\end{equation}
\begin{equation}
\mathbf{u} =
\frac{v + L_f^2 h}{L_g L_f h}
\end{equation}

Zero Dinamica
\begin{equation}
\dot{\eta_1} = \frac{lB l \eta_2 cos\eta_1}{B l^2 cos^2 \eta_1 - 1} 
\end{equation}

\begin{multline*}
\dot{\eta_2} = \frac{F}{D (C + B l cos\eta_1)} - 
\frac{B g l sin\eta_1 + \frac{B b_2 l^2 \eta_2 cos^2 \eta_1}{B l^2 cos^2 \eta_1 - 1}}{C + B l cos\eta_1} \\
+ \frac{\frac{B g l sin\eta_1}{D} + \frac{B l F cos\eta_1}{D (C + B l cos\eta_1)} + \frac{B l cos\eta_1 (B g l sin\eta_1 + \frac{B b_2 l^2 \eta_2 cos^2\eta_1}{B l^2 cos^2 \eta_1 -1})}{D (C + B l cos\eta_1)} + \frac{B b_1 l \eta_2 cos\eta_1}{D (B l^2 cos^2\eta_1 -1)}}{B l cos\eta_1} \\
- \frac{B l \eta_2^2 sin\eta_1}{(B l^2 cos^2\eta_1 -1)^2}
\end{multline*}

\begin{equation}
Q = 
\begin{bmatrix}
0 & \frac{B l}{B l^2 -1} \\
\frac{\frac{B g l}{D} + \frac{B^2 g l^2}{D (C + B l)}}{B l} - \frac{B g l}{C + B l} & \frac{\frac{B b_1 l}{D (B l^2 -1)} + \frac{B^2 b_2 l^3}{D(C + B l)(B l^2 -1)}}{B l} - \frac{B b_2 l^2}{(C + B l)(B l^2 -1)}
\end{bmatrix}
\end{equation}

\end{document}
